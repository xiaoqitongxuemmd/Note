# Chapter 4 常用界面组件的使用

所有从 QWidget 继承而来的界面组件被称为 widget 组件，它们是构成 GUI 应用程序的窗口界面的基本元素。

- 按钮类组件
- 输入类组件
- 显示类组件
- 容器类组件
- Item 组件

## QWidget 类的主要属性和接口函数

- 组件的 sizePolicy 属性定义了组件在水平和垂直方向的尺寸变化策略。
- QSizePolicy 还有 stretch 属性用作延展因子

## 布局管理

- 布局管理类有以下几种
  - QVBoxLayout
  - QHBoxLayout
  - QGridLayout（网格）
  - QFormLayout（类似网格，但是适用与两列布局）
  - QStackedLayout
    - 用于管理多个 QWidget 类对象，但任何时候只有一个页面可见

- QSpacerItem 从 LayoutItem 继承而来，可以用于在布局中占位，或填充剩余空间

- 网格布局中的 0，0 位置在左上角

## QString 字符串操作

- QString 中每个字符都是 QChar 类型
- QChar 的函数 toLatin1 用于将 QChar 字符转换为 Latin1 字符，也就将 UTF-16 编码的字符转换为 1 字节 Latin1 编码的字符。只有当 QChar 字符的编码为 0 - 255 时，函数 toLatin1 的转换才有意义。
- 如果字符的 UTF-16 超过 Latin1 编码的范围，则不能直接传递字符用于构造 QChar 对象，只能使用 unicode 编码
  ```C++
  QChar(0x9752); // 合法
  QChar("青") // 非法
  ```
- QChar 提供了很多对于类型的判断，例如 isDigit 判断是不是 0~9 的数字类型等。
- QString 字符串常用操作
  - 拼接添加：+/append/prepend
  - 截取：front/back/left/right/first/last/mid/sliced/section（依据 sep 分割，获取字符串）
  - 储存：isNull/isEmpty/count/size/length/clear/resize/fill
  - 搜索：indexOf/lastIndexOf/contains/endsWith/startsWith/count
  - 字符串转换和修改：toUpper/toLower/trimmed/simplified/chop/insert/replace/remove
- QString 字符串与数值的转换
  - 转换为整数：toInt/toUInt/...
  - 转换为浮点数：toFloat/toDouble
  - 转换为字符串：setNum
  - number：QString 的静态函数，功能与 setNum 类似
  - asprintf：类似 C 语言 printf，用于构造格式化输出字符串
  - arg：用于格式化输出各种数据的字符串
    ```C++
    int Y = 2021, M = 8, D = 3;
    int base = 10;
    QChar ch('0');
    QString str1 = QString("%1年%2月%3日").arg(Y).arg(M, 2, base, ch).arg(D, 2, base, ch)
    ```

## QSpinBox & QDoubleSpinBox

这两个组件用于数值输入和输出，因为有上下箭头用于调整数值，所以称为 spin